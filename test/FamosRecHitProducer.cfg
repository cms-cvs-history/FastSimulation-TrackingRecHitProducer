process FamosRecHitProducer  = 
{
    untracked      PSet maxEvents = {untracked int32 input = 50000}

  # Include the RandomNumberGeneratorService definition
  include "FastSimulation/Configuration/data/RandomServiceInitialization.cff"
  
  # Famos Common inputs 
  include "FastSimulation/Configuration/data/CommonInputsFake.cff"
    # Famos SimHits 
  include "FastSimulation/Configuration/data/FamosSequences.cff"
  replace famosSimHits.SimulateCalorimetry = false
  replace famosSimHits.SimulateTracking = true
#    replace famosSimHits.SimulatePileUp = false
  
    # Set to true to test new pixel parametrization
  replace siTrackerGaussianSmearingRecHits.UseCMSSWPixelParametrization = true
  replace siTrackerGaussianSmearingRecHits.doRecHitMatching = false
  # Magnetic Field (new mapping, 3.8 and 4.0T)
  # include "Configuration/StandardSequences/data/MagneticField_38T.cff"
  include "Configuration/StandardSequences/data/MagneticField_40T.cff"
  replace VolumeBasedMagneticFieldESProducer.useParametrizedTrackerField = true
     
  source = FlatRandomEGunSource 
  {	 
    untracked uint32 firstRun  = 1
    untracked      PSet  PGunParameters =
    {
	    # you can request more than 1 particle
	    #untracked vint32  PartID = { 211, 11, -13 }
      untracked vint32 PartID = {13} 
      untracked double MinEta = -2.5
      untracked double MaxEta = 2.5
      untracked double MinPhi = -3.14159265358979323846  # it must be in radians
      untracked double MaxPhi =  3.14159265358979323846
      untracked double MinE   = 1.
      untracked double MaxE   = 10.
    }      
    untracked int32 Verbosity = 0 # for printouts, set it to 1 (or greater)   
  }
  
  include "FastSimulation/TrackingRecHitProducer/test/FamosRecHitAnalysis.cfi"
    # Production and translation
  path Path = { 
    famosWithTrackerHits, 
    trackerGSRecHitTranslator, 
    FamosRecHitAnalysis
  }
  
  module  Output = PoolOutputModule { 
    untracked string fileName = "rechits.root" 
    untracked vstring outputCommands = 
    {
      "keep *"
    }
  }
#    endpath outpath = { Output }
  
}
