process SiPixelRecHitsInputDistributionsMaking  = {

  include "SimGeneral/HepPDTESSource/data/pythiapdt.cfi"

  include "Configuration/StandardSequences/data/FakeConditions.cff"

  untracked PSet maxEvents = {untracked int32 input = 10}

  # initialize  MessageLogger
  include "FWCore/MessageLogger/data/MessageLogger.cfi"   

  # initialize magnetic field
  # include "Configuration/StandardSequences/data/MagneticField_38T.cff"
  include "Configuration/StandardSequences/data/MagneticField_40T.cff"

  include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"
  include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"
 
  service = RandomNumberGeneratorService
    {
      # Change this seed to produce more samples
      untracked uint32 sourceSeed = 1

      PSet moduleSeeds =
      {
          untracked uint32 g4SimHits = 9876
          untracked uint32 mix = 7697
          untracked uint32 siPixelDigis = 8765
          untracked uint32 siStripDigis = 7654
      }
    }

  source = FlatRandomPtGunSource 
    {
      untracked uint32 firstRun  =  1
      untracked PSet  PGunParameters =
      {
	 # you can request more than 1 particle
	 #untracked vint32  PartID = { 211, 11, -13 }
	 untracked vint32 PartID = {13} 
	 untracked double MinEta = -3.0
	 untracked double MaxEta =  3.0
	 #
	 # phi must be given in radians
	 #
	 untracked double MinPhi = -3.14159265358979323846
	 untracked double MaxPhi =  3.14159265358979323846
	 untracked double MinPt  =  99.99
	 untracked double MaxPt  = 100.01
      }
      untracked int32 Verbosity = 0 # set to 1 (or greater)  for printouts
      untracked bool  AddAntiParticle = true    # if you turn it ON, for each particle
                                                # an anti-particle will be generated,
                                                # with 3-mom opposite to the particle's
    }

  module USER = PoolOutputModule { 
         untracked string fileName = "pixelrechits.root"      
  }
                                                                                
  # DQM services
  include "DQMServices/Core/data/DQM.cfg"

  service = Timing{ }
  
  service = SimpleMemoryCheck{ }

  include "SimG4Core/Application/data/g4SimHits.cfi"
  replace g4SimHits.Generator.HepMCProductLabel = "source" 

  # Mixing Module
  include "SimGeneral/MixingModule/data/mixNoPU.cfi"

  # TRACKER digitization sequence
  include "SimTracker/Configuration/data/SimTracker.cff" 

  # TRACKER LocalReco sequence 
  include "RecoLocalTracker/Configuration/data/RecoLocalTracker.cff"

  # TRACKER rechits validation sequence
  include "FastSimulation/TrackingRecHitProducer/test/SiPixelRecHitsInputDistributionsMaker.cfi"
 
  sequence simhits = {g4SimHits}	
  sequence digis = {trDigi}
  sequence rechits = {trackerlocalreco, pixRecHitsDistributionsMaker}


  path p1 = { simhits , mix , digis , rechits }

  endpath outpath = { USER }

  }		
